{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Idea Manager{% endblock %}</title>
    {% tailwind_css %}
  </head>
  <body class="bg-slate-100">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-purple-950 text-white p-2">Skip to main content</a>

    <header class="bg-purple-950 p-4">
      {% include 'includes/nav.html' %}
    </header>

    <main id="main-content" class="container mx-auto mt-8 px-4">
      {% block content %}{% endblock %}
    </main>

    <footer></footer>
    <!-- Logout confirmation -->
    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
          const logoutForm = document.querySelector('form[action="{% url 'logout' %}"]');
          if (logoutForm) {
              logoutForm.addEventListener('submit', function(e) {
                  e.preventDefault();
                  if (confirm('Are you sure you want to log out?')) {
                      this.submit();
                  }
              });
          }
      });
    </script>

    <!-- Mobile Menu Helper -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
          const navToggle = document.getElementById('nav-toggle');
          const mobileMenu = document.getElementById('mobile-menu');
          const mainContent = document.getElementById('main-content');

          function openMenu() {
              mobileMenu.classList.add('open');
              navToggle.setAttribute('aria-expanded', 'true');
              mobileMenu.setAttribute('aria-hidden', 'false');
              document.body.style.overflow = 'hidden';
          }

          function closeMenu() {
              mobileMenu.classList.remove('open');
              navToggle.setAttribute('aria-expanded', 'false');
              mobileMenu.setAttribute('aria-hidden', 'true');
              document.body.style.overflow = '';
          }

          navToggle.addEventListener('click', function(e) {
              e.stopPropagation();
              if (mobileMenu.classList.contains('open')) {
                  closeMenu();
              } else {
                  openMenu();
              }
          });

          document.addEventListener('click', function(event) {
              if (!mobileMenu.contains(event.target) && !navToggle.contains(event.target)) {
                  closeMenu();
              }
          });

          window.addEventListener('resize', function() {
              if (window.innerWidth >= 1024) {
                  closeMenu();
              }
          });
      });
  </script>

    {% block extra_js %}{% endblock %}
  </body>
</html>
